{% extends 'blog/base.html' %}
{% block title %}{{ block.super }} - {{ post.title }}{% endblock %}
{% block breadcrumbs %}<a href="#" name="top"></a>{{ post.category.name }}: {{ post.title }}{% endblock %}
{% block content %}
    {% include 'blog/post-single.html' %}
    <nav class="article-bottom">
        <div class="layout">
            <div class="like-button-wrapper">
                <div class="like-button">
                    <div class='wrapper'>
                        <div class='wrapper_content'>
                            <div class='wrapper_content__inner'>
                                <input
                                        {% if liked %}checked disabled readonly{% endif %}
                                        id='click'
                                        type='checkbox'
                                        onclick="location.href='{% url 'blog:article-like' post.slug %}';">
                                <label for='click'>
                                    <div class='favourite{% if not liked %} hide-counter{% endif %}'>
                                        <div class='spinner'>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                            <div class='spinner_part'></div>
                                        </div>
                                        <div class='favourite_heart'>
                                            <div class='favourite_heart__left'></div>
                                            <div class='favourite_heart__right'></div>
                                        </div>
                                        <div class='favourite_text'>
                                            <span>Мне нравится!</span>
                                        </div>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <span class="like-counter">
                    {% if post.get_likes.count > 0 %}
                        {{ post.get_likes.count}}
                    {% endif %}
                </span>
                <script type="text/javascript">
                    $( ".like-button .favourite.hide-counter" ).hover(
                        function() {
                            $( ".like-button ~ .like-counter" ).css('opacity', '0');
                        },
                        function() {
                            $( ".like-button ~ .like-counter" ).css('opacity', '1');
                        }
                    );
                </script>
            </div>
            {% if not disqus_enabled %}
                <div class="comments-counter-wrapper">
                    <i class="fas fa-comments fa-lg"></i>
                    <span class="counter">
                    {{ post.get_approved_comments.count }}
                </span>
                </div>
            {% endif %}
            {% if post.published %}
                {% if post.get_next_by_create_date.published %}
                    <a class="next-post hvr-push hvr-icon-forward" href="{{ post.get_next_by_create_date.get_absolute_url }}"
                       title="">
                        {{ post.get_next_by_create_date.title }}
                        <i class="fas fa-arrow-circle-right fa-lg hvr-icon"></i>
                    </a>
                {% endif %}
            {% elif user.is_authenticated %}
                <a class="next-post hvr-push" href="{% url 'blog:publish-post' slug=post.slug %}"
                   title="">
                    В ленту!
                    <i class="far fa-calendar-check fa-lg"></i>
                </a>
            {% endif %}
        </div>
    </nav>
    {% if disqus_enabled %}
        {% include 'blog/disqus_comments.html' %}
    {% else %}
        <div class="writecomment-container">
            <form class="writecomment clearfix" id="writecomment" action="" method="post">
                {% csrf_token %}
                <label for="id_author" class="forname">Как вас зовут?</label>
                <input id="id_author" name="author" maxlength="200" required placeholder="Онуфрий">
                <label for="id_email" class="foremail">Мы не украдем ваш E-mail<br>(и никому не покажем)</label>
                <input id="id_email" name="email" type="email" maxlength="254" placeholder="otec.onufree@gmail.com" required>
                <label for="id_text" class="forcomment-field">Напишите хороший комментарий</label>
                <textarea id="id_text" name="text" maxlength="5000" required
                          placeholder="Я вас категорически приветствую..."></textarea>
                {# reCAPTCHA button #}
                <div class="g-recaptcha" data-sitekey="6LcaHVoUAAAAAAAGWYb5r4830nRVMi6tvy2Xcon_"></div>
                <input id="submit-comment" type="submit" class="comment-submit genbutton hvr-push" value="Отправить">
                <label for="submit-comment"><i class="fas fa-share-square"></i></label>
            </form>
        </div>
        <div class="comments-container">
            {% for comment in post.get_comments %}
                {% if user.is_authenticated or comment.approved_comment %}
                    {% include 'blog/comment.html' %}
                {% endif %}
            {% empty %}
                <p class="no_comments">Ваш комментарий будет первым!</p>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}